<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"></meta>
  <title>pfych - $title$</title>
  <link href="../bundle.css" rel="stylesheet" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>
  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://pfy.ch/rss.xml" />

  <meta name="og:title" content="$title$"></meta>

  <meta name="twitter:site" content="@puffycheeses"></meta>
  $if(attribution)$
    <meta name="twitter:creator" content="@$attribution$"></meta>
  $else$
    <meta name="twitter:creator" content="@puffycheeses"></meta>
  $endif$

  $if(image)$
    <meta name="og:image" content="https://pfy.ch/blog/images/$image$"></meta>
    <meta name="twitter:image" content="https://pfy.ch/blog/images/$image$"></meta>
    <meta name="twitter:card" content="summary_large_image"></meta>
    $if(alt)$
      <meta name="twitter:image:alt" content="$alt$"></meta>
    $endif$
  $else$
    <meta name="twitter:card" content="summary"></meta>
  $endif$

  $if(summary)$
    <meta name="og:description" content="$summary$"></meta>
  $endif$
</head>
<body>
<div class="container">
  $if(draft)$
    <h1>THIS IS AN UN-EDITED DRAFT</h1>
    <p>
      This post has been marked as a draft meaning it 
      has not been published in the TOC or RSS.
    </p>
    <p>
      If you beleive this to be an error please contact me.
    </p>
    <hr />
  $endif$
  <h1><a href="/"><</a> $title$</h1>
  $body$
  <hr />
  <p>
    contact <i>at</i> pfy <i>dot</i> ch
  </p>
</div>

</body>
</html>
<script>
  /** This code is for the dithered image to coloured image thing */
  const initialImages = []
  Array.prototype.forEach.call( document.images, function( img ) {
    initialImages.push(img)
  });

  initialImages.map((img) => {
    if (img.className.includes('dithered')) {
      let imageElement = document.createElement('img');
      imageElement.setAttribute('loading', 'lazy');
      imageElement.setAttribute('src', img.src.replace('-grey.png', '.jpg'));
      imageElement.setAttribute('class', 'highRes');

      img.setAttribute('style', 'position: relative; z-index: 2;')
      img.addEventListener('click', () => {
        imageElement.setAttribute('class', 'highRes visible')
        img.setAttribute('class', 'dithered hidden')
      });

      img.parentNode.prepend(imageElement)

      const ditherColours = [
        '#ddd8b8',
        '#ddb8c2',
        '#b8ccdd',
        '#b3cbb9',
        '#cbc1b3',
        '#cbb3c8',
        '#84a9c0',
        '#c0b784',
        '#c08496'
      ]

      img.parentNode.style.background = ditherColours[
        Math.floor(Math.random() * (ditherColours.length))
      ]
    }
  });
</script>
